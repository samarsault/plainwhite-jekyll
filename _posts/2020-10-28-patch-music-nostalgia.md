---
layout: post
title: Ностальгия. Музыка из кейгенов
categories: [offtopic]
tags: [music,hobby]
comments: true
---

В далеком 2010 году в целях сдачи очередой лабы в универа я скачал с торрентов некое приложение для построения UML диаграмм. Для его активации в папке лежал патч, который, по доброй традиции, проигрывал 8-битную музыку при открытии. Помню, как меня перло слушать по ночам этот патч.
Поддавшись нахлынувшему чувству ностальгии, решил я его откопать и заценить поздно ночью. Но все оказалось не все так просто...

Папку с той программой мне каким-то образом удалось сохранить через десятилетие на своем компе - я вообще хорошую мызыку стараюсь беречь)
Но запустив снова патч, меня ждало огорчение - ошибка.

![Ошибка запуска]({{site.baseurl}}/assets/images/ea-patch/ea-patch-error.png)

Следующие список шагов который пришлось проделать для достижения цели:
1. Запуск в режиме совместимости с Windows 7 - ошибка запуска патча;
2. Запуск в режиме совместимости с Windows XP - ошибка запуска патча;
3. Скачать первый попавшийся виртуальный образ Windows 7 для VirtualBox и попробовать запустить - ошибка запуска патча;
4. Скачать виртуальный образ с Windows 7 образца 2010 года с оф. сайта майкрософт - нет приложения Windows Virtual PC для запуска;
5. Скачать Windows Virtual PC с оф. сайта майкрософт и установить - ошибка установки приложения;
6. Скачать виртуальный образ с Windows 7 образца 2012 года с оф. сайта майкрософт для VirualBox - VirtualBox не поддерживает 32-битные образы;
1. Скачать legacy VirtualBox версии 5.2.* c поддержкой 32-битных образов - все ок!;
2. Запустить Windows 7 образца 2012 года в VirtualBox 5.2.* - синий экран смерти О-о;
3. Зайти в BIOS и выключить виртуализцию, запустить снова образ - запустился!;
4. Примаунтить папку с патчем в образ, запустить и... - нет звука;
5. Заметить и тискнуть внизу иконку 4х4 пикселя включения звука - нет звука;
6. Выключить виртуалку, тискнуть галку Enable Audio в настройках образа, запустить - нет звука;
7. Выключить виртуалку, поменять audio controller в настройках образа, запустить - звук приветствия винды!;
8. Запустить патч... бинго!

![Вид патча]({{site.baseurl}}/assets/images/ea-patch/ea-patch.png)

Дальше я решил сохранить звук уже как нормальный звуковой файл. Достал все ресурсные файлы из exe-файла, я ожидал увидеть какой-нибудь media файл, но  создатель патча был чуть изобретательнее. Во-первых, он оставил какое-то забавное послание с отсылкой на Арпеджио
```
.<M..fly.in.space........!!Danthalian/MYSTERY!....@.........!1995-11-24!........0.P.=
  +++++++++++++++++++++
  ..I.@.&.#I.want.to.say.hello!............
  to.the.following.......@....dudes:Ma0,Cosa,Skee,
  .....+.....Crueger,Delek,Kysy,
  ..........Hires,Zajc,Serek..............
  "Arpeggio.rules........B.%...@the.chip-modules.!!!"..B.....@I.don't.know.what.to...C.&...@write...end.of.text...........
  +++++++++++++++++++++

  (C).1995.Noise.Prods
```
Во-вторых, далее судя по тому же файлу можно сделать вывод, что музыка генерировалась на ходу, так можно найти музыкальный "паттерн".

Немного промучившись с записью звука с виртуалки удалось снять неплохие 4,5 минуты, при попытки снять больше - запись, почему-то, фонила. Этого, в принципе, должно хватить для создания 10 часовой версии, так как повторяемость где-то каждые 45 секунд. Но я пока не упарывался)

Склепал видео, чтобы все могли насладиться: [https://youtu.be/1bBG_zZPSkI](https://youtu.be/1bBG_zZPSkI)
