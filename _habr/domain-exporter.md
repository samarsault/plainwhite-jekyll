Мониторим время истечения срока действия домена с помощью k8s и prometheus stack
https://github.com/zifter/helm-domain-exporter

# Проблема
После истечения срока аренды домен перестает резолвится в нужные адреса и становится доступным для продажи всем желающим.
Это может привести, как минимум, к недоступности сайта и, как максимум, полной потере права управления доменом.

Чтобы исключить эту проблему требуется вовремя продлевать домен.

Как автоматизировать нотификацию о времени истеччения домена? Об этом ниже.

# Предисловие
Если хотите более детально разобраться с метриками, то взгляните мой предыдущий пост, посвященный мониторингу с prometheus stack.

# Экспорт метрик
Есть проект на golang, который предоставляет метрики
https://github.com/shift/domain_exporter

domain_expiration
domain_expiration_unfindable

# Helm chart

# Dashboard
Для визуализации используется графана и их дашборды.

# Alert
Для начала предупредим, что осталось не так уже и много времени:

А потом будем уже подымать панику.


# Что дальше?
Как минимум, у вас должен быть чатик с алертами, который хотя бы изредка просматривается отвественными.
После появления алерта у вас будет достаточно времени чтобы оплатить домен.

Хельм чарт доступен
https://github.com/zifter/helm-domain-exporter

# Заключение
Проблема мониторинга времени истечения домена актуальна для многих компаний.
При использовании k8s и prometheus stack - это становится тривиальной задачей и вопросом